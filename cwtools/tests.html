<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<title>@tests</title>
</head>
<body onload="_startTests()">

<div id="debug-log"></div>

<script>
__CW_timers = {};
__CW_timers.sb = +new Date; /* scripts begin */
</script>
/**/scripts//

<script>
__CW_timers.se = +new Date; /* scripts end */

// TODO: move to UnitTest.js

function arrayToFakeModule(arr) {
	var fakeModule = {};
	var count = arr.length;
	while(count--) {
		if(window.console && window.console.log) {
			console.log("Adding to fakeModule:", arr[count].__name__);
		}
		fakeModule[arr[count].__name__] = arr[count];
	}
	return fakeModule;
}


// TODO: use CW log observer code

// doesn't work well because UnitTest.js is print()ing HTML right now :(

// CW.ISODate.localTime()

function print(msg) {
	var textnode = document.createTextNode('[' + (+new Date) + '] ' + msg);
	var br = document.createElement("br");
	var logd = document.getElementById('debug-log');
	logd.appendChild(textnode);
	logd.appendChild(br);
}

//function print(msg) {
//	var logd = document.getElementById('debug-log');
//	logd.innerHTML += msg + '<br>'
//}


print("Took " + (__CW_timers.se-__CW_timers.sb) + "ms to load scripts.");

function _startTests() {
	print('Running tests.<br>');

	var modules = /**/modules//
	var suite = CW.UnitTest.loadFromModule(arrayToFakeModule(modules), true /*moduleOfModules*/);

	var d = CW.UnitTest.run(suite);
//	d.addCallbacks(function(){document.body.style.backgroundColor = 'green';}, function(){});

}

</script>

<!-- TODO: factor out the /@static/ -->


<br>

