<!doctype html>
<html>
<head>
<title>
heap_limits_string
</title>
</head>
<body>

<div style="white-space: pre-wrap">
This page tests if the browser has a heap limit that can be exhausted by making a very long string.
Because IE sucks at string concatenation, this page will slow to a crawl.

This page will report its progress as it fills the heap. Keep in mind that browsers will use about twice
as much memory as the numbers report because JS engines usually store strings as UTF-16.

Notation is:
	number of concatenations,total character length of string

</div>

<div id="log">
</div>
<script>

function append(msg) {
	var textnode = document.createTextNode('[' + new Date + '] ' + msg);
	var br = document.createElement("br");
	var logd = document.getElementById('log');
	logd.appendChild(textnode);
	logd.appendChild(br);
}


// JS engines will store this as ~64MB because of UTF-16
var upTo = 32*1024*1024;
var count = -1;
var bigString = '';
function addMore() {
	count += 1;
	bigString += '78y3er78asduifhu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3u3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduihrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasduer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasduer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasduer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasduer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasduer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasduer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasdsduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h7aulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sd8hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3uer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasduh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhdufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3dufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3dufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3duil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhask3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhas3h78hasdufihauil3hrhaskjdsduifhu3hasdufihauil3hrhaskjdsduifhu3duuil3hrhas3h78hhasdufihauil3hrhaskjdsduifhu3duuil3hrhas3h78hhasdufihauil3hrhaskjdsduifhu3duuil3hrhas3h78hhasdufihauil3hrhaskjdsduifhu3duuil3hrhas3h78hduuil3hrhas3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhas3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhasjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3duufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3dufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3u3h78hasdufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjddhfuhsdfua78h34rhasldfa7o834huahdsfjh1';
	if(count % 100 == 0) {
		// Report on progress
		append([count, bigString.length].join(','))
	}
	if(bigString.length < upTo) {
		setTimeout(addMore, 0);
	} else {
		append('Done');
	}
}

setTimeout(addMore, 0);

</script>
</body>
</html>
