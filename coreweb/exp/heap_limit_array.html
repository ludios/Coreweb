<!doctype html>
<html>
<head>
	<meta http-equiv="charset" content="text/html; charset=utf-8">
	<title></title>
	<link rel="stylesheet" href="/@testres_Coreweb/test_page.css" type="text/css">
</head>
<body>

<div id="doc">
This page helps you check if the browser has a heap limit that can be exhausted by making
many different strings and pushing them into an array.

This page will report its progress as it fills the heap. Keep in mind that browsers will use about twice
as much memory as the numbers report because JS engines usually store strings as UTF-16.

Notation is:
	strings pushed,total character length of strings
</div>

<div id="log"></div>

<script src="/closure-library/closure/goog/base.js"></script>
<script src="/js_coreweb/deps.js"></script>

<script>
goog.require('cw.autoTitle');
goog.require('goog.debug.DivConsole');
goog.require('goog.debug.Logger');
</script>

<script>
var logDiv = document.getElementById('log');
var divConsole = new goog.debug.DivConsole(logDiv);
divConsole.setCapturing(true);

var logger = goog.debug.Logger.getLogger('logger');
logger.setLevel(goog.debug.Logger.Level.ALL);

logger.info('Logger works.');

</script>

<script>

// JS engines will store this as ~64MB because of UTF-16
var upTo = 32*1024*1024;
var byteCount = 0;
var count = -1;
var bigThing = [];
function addMore() {
	count += 1;
	var newString = new Date() + '78y3er78asduifhu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3u3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduiu3h78hasdufihauil3hrhaskjdfer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduihrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasduer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasduer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasduer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasduer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasduer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasduer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasdsduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h7aulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sdaulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3sd8hasdufihauil3hrhaskjdfh873hraulsduifhu3sduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3uer78asduifhu3h78hasdufihauil3hrhaskjdfh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasduh873hraulsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhdufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3dufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3dufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3duil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhask3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhas3h78hasdufihauil3hrhaskjdsduifhu3hasdufihauil3hrhaskjdsduifhu3duuil3hrhas3h78hhasdufihauil3hrhaskjdsduifhu3duuil3hrhas3h78hhasdufihauil3hrhaskjdsduifhu3duuil3hrhas3h78hhasdufihauil3hrhaskjdsduifhu3duuil3hrhas3h78hduuil3hrhas3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhas3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhasjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3duuil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3duufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3dufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3u3h78hasdufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjdsduifhu3h78hasdufihauil3hrhaskjddhfuhsdfua78h34rhasldfa7o834huahdsfjh1';
	byteCount += newString.length;
	bigThing.push(newString);
	if(count % 100 == 0) {
		// Report on progress
		logger.info([count, byteCount].join(','))
	}
	if(byteCount < upTo) {
		setTimeout(addMore, 0);
	} else {
		logger.info('Done');
	}
}

setTimeout(addMore, 0);

</script>
</body>
</html>
